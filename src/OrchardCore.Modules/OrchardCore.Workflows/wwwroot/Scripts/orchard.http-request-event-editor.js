/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

function initializeHttpRequestEventSecretManager(element) {
  if (!element) {
    return;
  }

  var vueMultiselect = Vue.component('vue-multiselect', window.VueMultiselect["default"]);
  var v = new Vue({
    el: element,
    components: {
      'vue-multiselect': vueMultiselect
    },
    data: function data() {
      var secretData = JSON.parse(element.dataset.secretData);
      var workflowTypeId = $('[data-workflow-type-unique-id]').data('workflow-type-unique-id');
      var activityId = $('[data-activity-id]').data('activity-id');
      var antiforgeryHeaderName = $('[data-antiforgery-header-name]').data('antiforgery-header-name');
      var antiforgeryToken = $('[data-antiforgery-token]').data('antiforgery-token');
      var headers = {};
      headers[antiforgeryHeaderName] = antiforgeryToken;
      return {
        secrets: secretData.secrets,
        selected: secretData.selected,
        workflowTypeId: workflowTypeId,
        activityId: activityId,
        linkUrl: secretData.linkUrl,
        createUrl: secretData.createUrl,
        headers: headers,
        linkSecretErrorMessage: secretData.linkSecretErrorMessage,
        createSecretErrorMessage: secretData.createSecretErrorMessage
      };
    },
    computed: {
      isLinkButtonVisible: function isLinkButtonVisible() {
        return this.selected.workflowTypeId !== '' && (this.selected.activityId !== this.activityId || this.selected.workflowTypeId !== this.workflowTypeId);
      }
    },
    methods: {
      create: function create(secretName) {
        var self = this;
        $.ajax({
          url: self.createUrl,
          method: 'POST',
          headers: self.headers,
          data: {
            secretName: secretName,
            workflowTypeId: self.workflowTypeId,
            activityId: self.activityId,
            tokenLifeSpan: $('#token-lifespan').val()
          },
          success: function success(data) {
            self.secrets.push(data);
            self.selected = data;
          },
          error: function error() {
            alert(self.linkSecretErrorMessage);
          }
        });
      },
      linkSecret: function linkSecret() {
        var self = this;
        $.ajax({
          url: self.linkUrl,
          method: 'POST',
          headers: self.headers,
          data: {
            secretName: self.selected.name,
            workflowTypeId: self.workflowTypeId,
            activityId: self.activityId,
            tokenLifeSpan: $('#token-lifespan').val()
          },
          success: function success(data) {
            self.selected.workflowTypeId = data.workflowTypeId;
            self.selected.activityId = data.activityId;
          },
          error: function error() {
            alert(self.linkSecretErrorMessage);
          }
        });
      }
    }
  });
}
///<reference path="../../../Assets/Lib/jquery/typings.d.ts" />
$(function () {
  var generateWorkflowUrl = function generateWorkflowUrl() {
    var workflowTypeId = $('[data-workflow-type-id]').data('workflow-type-id');
    var activityId = $('[data-activity-id]').data('activity-id');
    var tokenLifeSpan = $('#token-lifespan').val();
    var generateUrl = $('[data-generate-url]').data('generate-url') + ("?workflowTypeId=" + workflowTypeId + "&activityId=" + activityId + "&tokenLifeSpan=" + tokenLifeSpan);
    var antiforgeryHeaderName = $('[data-antiforgery-header-name]').data('antiforgery-header-name');
    var antiforgeryToken = $('[data-antiforgery-token]').data('antiforgery-token');
    var headers = {};
    headers[antiforgeryHeaderName] = antiforgeryToken;
    $.post({
      url: generateUrl,
      headers: headers
    }).done(function (url) {
      $('#workflow-url-text').val(url);
    });
  };

  $('#generate-url-button').on('click', function (e) {
    generateWorkflowUrl();
  });

  if ($('#workflow-url-text').val() == '') {
    generateWorkflowUrl();
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHAtcmVxdWVzdC1ldmVudC1zZWNyZXQtbWFuYWdlci5qcyIsIndvcmtmbG93LXVybC1nZW5lcmF0b3IudHMiXSwibmFtZXMiOlsiaW5pdGlhbGl6ZUh0dHBSZXF1ZXN0RXZlbnRTZWNyZXRNYW5hZ2VyIiwiZWxlbWVudCIsInZ1ZU11bHRpc2VsZWN0IiwiVnVlIiwiY29tcG9uZW50Iiwid2luZG93IiwiVnVlTXVsdGlzZWxlY3QiLCJ2IiwiZWwiLCJjb21wb25lbnRzIiwiZGF0YSIsInNlY3JldERhdGEiLCJKU09OIiwicGFyc2UiLCJkYXRhc2V0Iiwid29ya2Zsb3dUeXBlSWQiLCIkIiwiYWN0aXZpdHlJZCIsImFudGlmb3JnZXJ5SGVhZGVyTmFtZSIsImFudGlmb3JnZXJ5VG9rZW4iLCJoZWFkZXJzIiwic2VjcmV0cyIsInNlbGVjdGVkIiwibGlua1VybCIsImNyZWF0ZVVybCIsImxpbmtTZWNyZXRFcnJvck1lc3NhZ2UiLCJjcmVhdGVTZWNyZXRFcnJvck1lc3NhZ2UiLCJjb21wdXRlZCIsImlzTGlua0J1dHRvblZpc2libGUiLCJtZXRob2RzIiwiY3JlYXRlIiwic2VjcmV0TmFtZSIsInNlbGYiLCJhamF4IiwidXJsIiwibWV0aG9kIiwidG9rZW5MaWZlU3BhbiIsInZhbCIsInN1Y2Nlc3MiLCJwdXNoIiwiZXJyb3IiLCJhbGVydCIsImxpbmtTZWNyZXQiLCJuYW1lIiwiZ2VuZXJhdGVXb3JrZmxvd1VybCIsImdlbmVyYXRlVXJsIiwicG9zdCIsImRvbmUiLCJvbiIsImUiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsU0FBU0EsdUNBQVQsQ0FBaURDLE9BQWpELEVBQTBEO0FBQ3RELE1BQUksQ0FBQ0EsT0FBTCxFQUFjO0FBQ1Y7QUFDSDs7QUFFRCxNQUFJQyxjQUFjLEdBQUdDLEdBQUcsQ0FBQ0MsU0FBSixDQUFjLGlCQUFkLEVBQWlDQyxNQUFNLENBQUNDLGNBQVAsV0FBakMsQ0FBckI7QUFFQSxNQUFJQyxDQUFDLEdBQUcsSUFBSUosR0FBSixD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QUN0QjtBQUNKLENBM0JBLENBQUQiLCJmaWxlIjoib3JjaGFyZC5odHRwLXJlcXVlc3QtZXZlbnQtZWRpdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVIdHRwUmVxdWVzdEV2ZW50U2VjcmV0TWFuYWdlcihlbGVtZW50KSB7XHJcbiAgICBpZiAoIWVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHZ1ZU11bHRpc2VsZWN0ID0gVnVlLmNvbXBvbmVudCgndnVlLW11bHRpc2VsZWN0Jywgd2luZG93LlZ1ZU11bHRpc2VsZWN0LmRlZmF1bHQpO1xyXG5cclxuICAgIHZhciB2ID0gbmV3IFZ1ZSh7XHJcbiAgICAgICAgZWw6IGVsZW1lbnQsXHJcbiAgICAgICAgY29tcG9uZW50czogeyAndnVlLW11bHRpc2VsZWN0JzogdnVlTXVsdGlzZWxlY3QgfSxcclxuICAgICAgICBkYXRhOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWNyZXREYXRhID0gSlNPTi5wYXJzZShlbGVtZW50LmRhdGFzZXQuc2VjcmV0RGF0YSk7XHJcbiAgICAgICAgICAgIHZhciB3b3JrZmxvd1R5cGVJZCA9ICQoJ1tkYXRhLXdvcmtmbG93LXR5cGUtdW5pcXVlLWlkXScpLmRhdGEoJ3dvcmtmbG93LXR5cGUtdW5pcXVlLWlkJyk7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpdml0eUlkID0gJCgnW2RhdGEtYWN0aXZpdHktaWRdJykuZGF0YSgnYWN0aXZpdHktaWQnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbnRpZm9yZ2VyeUhlYWRlck5hbWUgPSAkKCdbZGF0YS1hbnRpZm9yZ2VyeS1oZWFkZXItbmFtZV0nKS5kYXRhKCdhbnRpZm9yZ2VyeS1oZWFkZXItbmFtZScpO1xyXG4gICAgICAgICAgICB2YXIgYW50aWZvcmdlcnlUb2tlbiA9ICQoJ1tkYXRhLWFudGlmb3JnZXJ5LXRva2VuXScpLmRhdGEoJ2FudGlmb3JnZXJ5LXRva2VuJyk7XHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XHJcblxyXG4gICAgICAgICAgICBoZWFkZXJzW2FudGlmb3JnZXJ5SGVhZGVyTmFtZV0gPSBhbnRpZm9yZ2VyeVRva2VuO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHNlY3JldHM6IHNlY3JldERhdGEuc2VjcmV0cyxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBzZWNyZXREYXRhLnNlbGVjdGVkLFxyXG4gICAgICAgICAgICAgICAgd29ya2Zsb3dUeXBlSWQ6IHdvcmtmbG93VHlwZUlkLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZpdHlJZDogYWN0aXZpdHlJZCxcclxuICAgICAgICAgICAgICAgIGxpbmtVcmw6IHNlY3JldERhdGEubGlua1VybCxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVVybDogc2VjcmV0RGF0YS5jcmVhdGVVcmwsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgbGlua1NlY3JldEVycm9yTWVzc2FnZTogc2VjcmV0RGF0YS5saW5rU2VjcmV0RXJyb3JNZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2VjcmV0RXJyb3JNZXNzYWdlOiBzZWNyZXREYXRhLmNyZWF0ZVNlY3JldEVycm9yTWVzc2FnZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21wdXRlZDoge1xyXG4gICAgICAgICAgICBpc0xpbmtCdXR0b25WaXNpYmxlKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWQud29ya2Zsb3dUeXBlSWQgIT09ICcnICYmICh0aGlzLnNlbGVjdGVkLmFjdGl2aXR5SWQgIT09IHRoaXMuYWN0aXZpdHlJZCB8fCB0aGlzLnNlbGVjdGVkLndvcmtmbG93VHlwZUlkICE9PSB0aGlzLndvcmtmbG93VHlwZUlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgICBjcmVhdGUoc2VjcmV0TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHNlbGYuY3JlYXRlVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHNlbGYuaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3JldE5hbWU6IHNlY3JldE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtmbG93VHlwZUlkOiBzZWxmLndvcmtmbG93VHlwZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUlkOiBzZWxmLmFjdGl2aXR5SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuTGlmZVNwYW46ICQoJyN0b2tlbi1saWZlc3BhbicpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlY3JldHMucHVzaChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZCA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChzZWxmLmxpbmtTZWNyZXRFcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsaW5rU2VjcmV0KCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHNlbGYubGlua1VybCxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBzZWxmLmhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNyZXROYW1lOiBzZWxmLnNlbGVjdGVkLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtmbG93VHlwZUlkOiBzZWxmLndvcmtmbG93VHlwZUlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUlkOiBzZWxmLmFjdGl2aXR5SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuTGlmZVNwYW46ICQoJyN0b2tlbi1saWZlc3BhbicpLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkLndvcmtmbG93VHlwZUlkID0gZGF0YS53b3JrZmxvd1R5cGVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZC5hY3Rpdml0eUlkID0gZGF0YS5hY3Rpdml0eUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoc2VsZi5saW5rU2VjcmV0RXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL0Fzc2V0cy9MaWIvanF1ZXJ5L3R5cGluZ3MuZC50c1wiIC8+XG5cbiQoKCkgPT4ge1xuICAgIGNvbnN0IGdlbmVyYXRlV29ya2Zsb3dVcmwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHdvcmtmbG93VHlwZUlkOiBzdHJpbmcgPSAkKCdbZGF0YS13b3JrZmxvdy10eXBlLWlkXScpLmRhdGEoJ3dvcmtmbG93LXR5cGUtaWQnKTtcbiAgICAgICAgY29uc3QgYWN0aXZpdHlJZDogc3RyaW5nID0gJCgnW2RhdGEtYWN0aXZpdHktaWRdJykuZGF0YSgnYWN0aXZpdHktaWQnKTtcbiAgICAgICAgdmFyIHRva2VuTGlmZVNwYW4gPSAkKCcjdG9rZW4tbGlmZXNwYW4nKS52YWwoKTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGVVcmw6IHN0cmluZyA9ICQoJ1tkYXRhLWdlbmVyYXRlLXVybF0nKS5kYXRhKCdnZW5lcmF0ZS11cmwnKSArIGA/d29ya2Zsb3dUeXBlSWQ9JHt3b3JrZmxvd1R5cGVJZH0mYWN0aXZpdHlJZD0ke2FjdGl2aXR5SWR9JnRva2VuTGlmZVNwYW49JHt0b2tlbkxpZmVTcGFufWA7XG4gICAgICAgIGNvbnN0IGFudGlmb3JnZXJ5SGVhZGVyTmFtZTogc3RyaW5nID0gJCgnW2RhdGEtYW50aWZvcmdlcnktaGVhZGVyLW5hbWVdJykuZGF0YSgnYW50aWZvcmdlcnktaGVhZGVyLW5hbWUnKTtcbiAgICAgICAgY29uc3QgYW50aWZvcmdlcnlUb2tlbjogc3RyaW5nID0gJCgnW2RhdGEtYW50aWZvcmdlcnktdG9rZW5dJykuZGF0YSgnYW50aWZvcmdlcnktdG9rZW4nKTtcbiAgICAgICAgY29uc3QgaGVhZGVyczogYW55ID0ge307XG5cbiAgICAgICAgaGVhZGVyc1thbnRpZm9yZ2VyeUhlYWRlck5hbWVdID0gYW50aWZvcmdlcnlUb2tlbjtcblxuICAgICAgICAkLnBvc3Qoe1xuICAgICAgICAgICAgdXJsOiBnZW5lcmF0ZVVybCxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcbiAgICAgICAgfSkuZG9uZSh1cmwgPT4ge1xuICAgICAgICAgICAgJCgnI3dvcmtmbG93LXVybC10ZXh0JykudmFsKHVybCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkKCcjZ2VuZXJhdGUtdXJsLWJ1dHRvbicpLm9uKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBnZW5lcmF0ZVdvcmtmbG93VXJsKCk7XG4gICAgfSk7XG5cbiAgICBpZiAoJCgnI3dvcmtmbG93LXVybC10ZXh0JykudmFsKCkgPT0gJycpIHtcbiAgICAgICAgZ2VuZXJhdGVXb3JrZmxvd1VybCgpO1xuICAgIH1cbn0pO1xuIl19
